<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Too Turned Trivia™</title>
    <meta name="description" content="Too Turned Trivia™ - Modern mobile trivia game with multiple gameplay modes">
    <meta name="theme-color" content="#000000">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 transform=%22rotate(-15 50 50)%22 fill=%22%23F5A623%22>T</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== CSS RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        :root {
            /* Color Palette */
            --black: #000000;
            --white: #FFFFFF;
            --yellow: #F5A623;
            --yellow-dark: #E69500;
            --yellow-light: #FFD166;
            --gray-50: #FAFAFA;
            --gray-100: #F5F5F5;
            --gray-200: #EEEEEE;
            --gray-300: #E0E0E0;
            --gray-400: #BDBDBD;
            --gray-500: #9E9E9E;
            --gray-600: #757575;
            --gray-700: #616161;
            --gray-800: #424242;
            --gray-900: #212121;
            
            /* Status Colors */
            --success: #4CAF50;
            --error: #F44336;
            --warning: #FF9800;
            --info: #2196F3;
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;
            
            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-2xl: 24px;
            --radius-full: 9999px;
            
            /* Typography */
            --font-size-xs: 12px;
            --font-size-sm: 14px;
            --font-size-base: 16px;
            --font-size-lg: 18px;
            --font-size-xl: 20px;
            --font-size-2xl: 24px;
            --font-size-3xl: 30px;
            --font-size-4xl: 36px;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.15);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.25);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.3);
            --shadow-yellow: 0 0 20px rgba(245, 166, 35, 0.3);
            
            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-base: 250ms ease;
            --transition-slow: 350ms ease;
            
            /* Z-index */
            --z-overlay: 1000;
            --z-modal: 2000;
            --z-toast: 3000;
            --z-loading: 4000;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--black);
            color: var(--white);
            line-height: 1.5;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* ===== LOADING SCREEN ===== */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--black);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-loading);
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-logo {
            font-size: 80px;
            font-weight: 900;
            color: var(--yellow);
            margin-bottom: var(--space-xl);
            animation: pulse 2s ease-in-out infinite;
            transform: rotate(-15deg);
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: var(--gray-900);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            width: 0%;
            background: var(--yellow);
            transition: width 0.3s ease;
            border-radius: 2px;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: rotate(-15deg) scale(1); }
            50% { opacity: 0.7; transform: rotate(-15deg) scale(1.1); }
        }

        /* ===== TYPOGRAPHY ===== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: -0.02em;
        }

        .text-display {
            font-size: var(--font-size-4xl);
            font-weight: 900;
            letter-spacing: -0.03em;
        }

        .text-title {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .text-headline {
            font-size: var(--font-size-2xl);
            font-weight: 700;
        }

        .text-subhead {
            font-size: var(--font-size-xl);
            font-weight: 600;
        }

        .text-body {
            font-size: var(--font-size-base);
            font-weight: 400;
        }

        .text-caption {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
            font-weight: 500;
        }

        .text-small {
            font-size: var(--font-size-xs);
            color: var(--gray-500);
        }

        /* ===== LAYOUT UTILITIES ===== */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-md);
        }

        .screen {
            display: none;
            min-height: 100vh;
            padding-top: 60px;
            padding-bottom: 20px;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .page-content {
            padding: var(--space-xl) var(--space-md);
        }

        .page-header {
            margin-bottom: var(--space-2xl);
        }

        .page-title {
            color: var(--white);
            margin-bottom: var(--space-sm);
        }

        .page-subtitle {
            color: var(--gray-400);
        }

        /* ===== NAVIGATION BAR ===== */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: var(--black);
            border-bottom: 1px solid var(--gray-900);
            display: flex;
            align-items: center;
            padding: 0 var(--space-md);
            z-index: 1000;
        }

        .nav-back {
            width: 40px;
            height: 40px;
            background: var(--gray-900);
            border: none;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-right: var(--space-md);
        }

        .nav-back:hover {
            background: var(--gray-800);
            transform: translateX(-2px);
        }

        .nav-back.hidden {
            display: none;
        }

        .nav-title {
            flex: 1;
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--white);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .nav-actions {
            display: flex;
            gap: var(--space-sm);
            margin-left: auto;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            background: var(--gray-900);
            border: none;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .nav-btn:hover {
            background: var(--gray-800);
        }

        .nav-btn.menu-toggle {
            background: var(--yellow);
            color: var(--black);
        }

        .nav-btn.menu-toggle:hover {
            background: var(--yellow-dark);
        }

        /* ===== HAMBURGER MENU ===== */
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: var(--z-overlay);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .menu-content {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 280px;
            background: var(--gray-900);
            border-left: 1px solid var(--gray-800);
            transform: translateX(100%);
            transition: transform var(--transition-base) var(--transition-slow);
            padding: var(--space-xl) var(--space-lg);
            overflow-y: auto;
        }

        .menu-overlay.active .menu-content {
            transform: translateX(0);
        }

        .menu-header {
            margin-bottom: var(--space-2xl);
        }

        .menu-title {
            font-size: var(--font-size-2xl);
            font-weight: 800;
            color: var(--yellow);
            margin-bottom: var(--space-xs);
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-sm);
            color: var(--gray-300);
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .menu-item:hover,
        .menu-item.active {
            background: var(--gray-800);
            color: var(--white);
        }

        .menu-item.active {
            color: var(--yellow);
        }

        .menu-icon {
            width: 24px;
            text-align: center;
            font-size: var(--font-size-lg);
        }

        .menu-close {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-height: 56px;
            min-width: 56px;
            padding: var(--space-md) var(--space-xl);
            border: none;
            border-radius: var(--radius-lg);
            font-family: inherit;
            font-size: var(--font-size-base);
            font-weight: 600;
            line-height: 1;
            text-decoration: none;
            cursor: pointer;
            transition: all var(--transition-base);
            user-select: none;
            touch-action: manipulation;
            outline: none;
            position: relative;
            overflow: hidden;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: var(--yellow);
            color: var(--black);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--yellow-dark);
            box-shadow: var(--shadow-yellow);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--gray-900);
            color: var(--white);
            border: 1px solid var(--gray-800);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--gray-800);
            border-color: var(--gray-700);
        }

        .btn-outline {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--yellow);
        }

        .btn-outline:hover:not(:disabled) {
            background: rgba(245, 166, 35, 0.1);
        }

        .btn-danger {
            background: transparent;
            color: var(--error);
            border: 2px solid var(--error);
        }

        .btn-danger:hover:not(:disabled) {
            background: rgba(244, 67, 54, 0.1);
        }

        .btn-icon {
            min-width: 48px;
            min-height: 48px;
            padding: var(--space-sm);
            border-radius: var(--radius-md);
        }

        .btn-sm {
            min-height: 40px;
            min-width: 40px;
            padding: var(--space-sm) var(--space-lg);
            font-size: var(--font-size-sm);
        }

        .btn-lg {
            min-height: 64px;
            padding: var(--space-lg) var(--space-2xl);
            font-size: var(--font-size-lg);
            font-weight: 700;
        }

        .btn-full {
            width: 100%;
        }

        /* ===== CARDS ===== */
        .card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            border-color: var(--gray-700);
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card.interactive {
            cursor: pointer;
        }

        .card.interactive:hover {
            border-color: var(--yellow);
            box-shadow: var(--shadow-yellow);
        }

        .card.selected {
            border-color: var(--yellow);
            background: rgba(245, 166, 35, 0.05);
        }

        .card-header {
            margin-bottom: var(--space-md);
        }

        .card-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--space-xs);
        }

        .card-subtitle {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
        }

        .card-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background: var(--gray-800);
            color: var(--gray-300);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .card-badge.yellow {
            background: rgba(245, 166, 35, 0.2);
            color: var(--yellow);
        }

        /* ===== HOME SCREEN ===== */
        .hero-section {
            text-align: center;
            padding: var(--space-2xl) 0;
            background: linear-gradient(135deg, rgba(245, 166, 35, 0.1) 0%, transparent 100%);
            border-radius: var(--radius-2xl);
            margin-bottom: var(--space-2xl);
        }

        .hero-title {
            font-size: var(--font-size-4xl);
            font-weight: 900;
            background: linear-gradient(135deg, var(--yellow) 0%, var(--yellow-light) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: var(--space-md);
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: var(--font-size-lg);
            color: var(--gray-400);
            max-width: 600px;
            margin: 0 auto var(--space-xl);
        }

        .quick-actions {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
        }

        @media (min-width: 640px) {
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .action-card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            text-decoration: none;
            color: var(--white);
            transition: all var(--transition-base);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-height: 180px;
        }

        .action-card:hover {
            border-color: var(--yellow);
            transform: translateY(-4px);
            box-shadow: var(--shadow-yellow);
        }

        .action-icon {
            width: 60px;
            height: 60px;
            background: rgba(245, 166, 35, 0.1);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-lg);
            color: var(--yellow);
            font-size: 24px;
        }

        .action-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .action-description {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
        }

        /* ===== GAME MODES GALLERY ===== */
        .modes-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-md);
        }

        @media (min-width: 768px) {
            .modes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .mode-card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            cursor: pointer;
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .mode-card:hover {
            border-color: var(--gray-700);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .mode-card.selected {
            border-color: var(--yellow);
            background: rgba(245, 166, 35, 0.05);
            box-shadow: var(--shadow-yellow);
        }

        .mode-icon {
            width: 48px;
            height: 48px;
            background: var(--gray-800);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-md);
            color: var(--yellow);
            font-size: 20px;
        }

        .mode-card.selected .mode-icon {
            background: rgba(245, 166, 35, 0.2);
        }

        .mode-name {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--space-xs);
        }

        .mode-description {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
            margin-bottom: var(--space-md);
            line-height: 1.4;
        }

        .mode-features {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
        }

        .mode-feature {
            padding: var(--space-xs) var(--space-sm);
            background: var(--gray-800);
            color: var(--gray-300);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: 600;
        }

        .mode-card.selected .mode-feature {
            background: rgba(245, 166, 35, 0.2);
            color: var(--yellow);
        }

        /* ===== DECK LIBRARY ===== */
        .decks-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-md);
        }

        @media (min-width: 640px) {
            .decks-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .decks-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .deck-card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-xl);
            overflow: hidden;
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .deck-card:hover {
            border-color: var(--gray-700);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .deck-card.selected {
            border-color: var(--yellow);
            box-shadow: var(--shadow-yellow);
        }

        .deck-image {
            height: 120px;
            background: linear-gradient(135deg, var(--gray-800), var(--gray-900));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .deck-icon {
            font-size: 48px;
            color: var(--yellow);
            z-index: 1;
        }

        .deck-content {
            padding: var(--space-lg);
        }

        .deck-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--white);
            margin-bottom: var(--space-xs);
        }

        .deck-description {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
            margin-bottom: var(--space-md);
            line-height: 1.4;
        }

        .deck-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: var(--font-size-sm);
            color: var(--gray-500);
        }

        .deck-count {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .deck-rating {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            color: var(--yellow);
        }

        /* ===== GAME SETUP ===== */
        .setup-stepper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
        }

        .step-circle {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            background: var(--gray-800);
            color: var(--gray-500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: var(--font-size-sm);
            transition: all var(--transition-base);
        }

        .step.active .step-circle {
            background: var(--yellow);
            color: var(--black);
        }

        .step.completed .step-circle {
            background: var(--gray-700);
            color: var(--white);
        }

        .step-label {
            font-size: var(--font-size-xs);
            color: var(--gray-500);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .step.active .step-label {
            color: var(--yellow);
        }

        .setup-content {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .setup-section {
            display: none;
        }

        .setup-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .players-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .player-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md);
            background: var(--gray-800);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .player-item:hover {
            background: var(--gray-700);
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            background: var(--yellow);
            color: var(--black);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: var(--font-size-lg);
        }

        .player-name {
            font-weight: 600;
            color: var(--white);
        }

        .player-remove {
            width: 32px;
            height: 32px;
            background: transparent;
            border: none;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-400);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .player-remove:hover {
            background: var(--gray-700);
            color: var(--error);
        }

        .player-input-group {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        /* ===== GAME SCREEN ===== */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xl);
            padding: var(--space-md);
            background: var(--gray-900);
            border-radius: var(--radius-lg);
            border: 1px solid var(--gray-800);
        }

        .game-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .game-mode {
            font-size: var(--font-size-sm);
            color: var(--yellow);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .game-stats {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: var(--font-size-2xl);
            font-weight: 800;
            color: var(--white);
        }

        .stat-label {
            font-size: var(--font-size-xs);
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .timer-display {
            text-align: center;
        }

        .timer-circle {
            width: 80px;
            height: 80px;
            position: relative;
        }

        .timer-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .timer-circle-bg {
            fill: none;
            stroke: var(--gray-800);
            stroke-width: 4;
        }

        .timer-circle-fill {
            fill: none;
            stroke: var(--yellow);
            stroke-width: 4;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: var(--font-size-xl);
            font-weight: 800;
            color: var(--white);
        }

        .question-card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            margin-bottom: var(--space-xl);
            box-shadow: var(--shadow-lg);
        }

        .question-header {
            padding: var(--space-lg);
            background: linear-gradient(135deg, var(--gray-800), var(--gray-900));
            border-bottom: 1px solid var(--gray-800);
        }

        .question-progress {
            font-size: var(--font-size-sm);
            color: var(--yellow);
            font-weight: 600;
            margin-bottom: var(--space-xs);
            display: flex;
            justify-content: space-between;
        }

        .question-category {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .question-text {
            padding: var(--space-xl);
            font-size: var(--font-size-xl);
            font-weight: 600;
            line-height: 1.4;
            text-align: center;
            color: var(--white);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-sm);
            padding: var(--space-lg);
        }

        @media (min-width: 640px) {
            .answers-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .answer-option {
            padding: var(--space-lg);
            background: var(--gray-800);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            min-height: 72px;
            position: relative;
            overflow: hidden;
        }

        .answer-option:hover:not(.disabled) {
            background: var(--gray-700);
            transform: translateY(-2px);
        }

        .answer-option.selected {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success);
            color: var(--success);
        }

        .answer-option.incorrect {
            background: rgba(244, 67, 54, 0.1);
            border-color: var(--error);
            color: var(--error);
        }

        .answer-option.disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .answer-letter {
            width: 36px;
            height: 36px;
            background: var(--gray-700);
            color: var(--white);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: var(--font-size-lg);
            flex-shrink: 0;
        }

        .answer-option.selected .answer-letter {
            background: var(--success);
            color: var(--white);
        }

        .answer-option.incorrect .answer-letter {
            background: var(--error);
            color: var(--white);
        }

        .answer-text {
            flex: 1;
            font-size: var(--font-size-base);
            font-weight: 500;
            text-align: left;
        }

        .game-controls {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-xl);
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
            padding: var(--space-md);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-2xl);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: transform var(--transition-base);
            box-shadow: var(--shadow-xl);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: var(--space-xl);
            border-bottom: 1px solid var(--gray-800);
            text-align: center;
        }

        .modal-body {
            padding: var(--space-xl);
        }

        .modal-footer {
            padding: var(--space-xl);
            border-top: 1px solid var(--gray-800);
            display: flex;
            gap: var(--space-md);
            justify-content: center;
        }

        /* ===== STATS SCREEN ===== */
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-2xl);
        }

        .stat-card {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            text-align: center;
        }

        .stat-value {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            color: var(--yellow);
            margin-bottom: var(--space-xs);
        }

        .stat-label {
            font-size: var(--font-size-sm);
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .history-item {
            background: var(--gray-900);
            border: 1px solid var(--gray-800);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            display: grid;
            grid-template-columns: 1fr auto;
            gap: var(--space-md);
            align-items: center;
        }

        .history-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .history-game {
            font-weight: 600;
            color: var(--white);
        }

        .history-details {
            display: flex;
            gap: var(--space-md);
            font-size: var(--font-size-sm);
            color: var(--gray-500);
        }

        .history-score {
            font-size: var(--font-size-xl);
            font-weight: 800;
            color: var(--yellow);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes correct {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes incorrect {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .animate-fadeIn {
            animation: fadeIn var(--transition-base);
        }

        .animate-slideUp {
            animation: slideUp var(--transition-base);
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .animate-correct {
            animation: correct 0.3s ease;
        }

        .animate-incorrect {
            animation: incorrect 0.3s ease;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 639px) {
            .text-display {
                font-size: var(--font-size-3xl);
            }
            
            .text-title {
                font-size: var(--font-size-2xl);
            }
            
            .hero-section {
                padding: var(--space-xl) var(--space-md);
            }
            
            .question-text {
                font-size: var(--font-size-lg);
                padding: var(--space-lg);
            }
            
            .modal {
                border-radius: var(--radius-xl);
            }
        }

        @media (min-width: 640px) and (max-width: 1023px) {
            .container {
                padding: 0 var(--space-xl);
            }
            
            .question-card {
                max-width: 600px;
                margin: 0 auto var(--space-xl);
            }
        }

        @media (min-width: 1024px) {
            .container {
                padding: 0 var(--space-2xl);
            }
            
            .desktop-layout {
                display: grid;
                grid-template-columns: 280px 1fr;
                gap: var(--space-2xl);
            }
            
            .answers-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ===== ACCESSIBILITY ===== */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .focus-visible:focus-visible {
            outline: 2px solid var(--yellow);
            outline-offset: 2px;
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gray-900);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray-700);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray-600);
        }

        /* ===== UTILITY CLASSES ===== */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }

        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .gap-xs { gap: var(--space-xs); }
        .gap-sm { gap: var(--space-sm); }
        .gap-md { gap: var(--space-md); }
        .gap-lg { gap: var(--space-lg); }
        .gap-xl { gap: var(--space-xl); }

        .w-full { width: 100%; }
        .h-full { height: 100%; }

        .mt-xs { margin-top: var(--space-xs); }
        .mt-sm { margin-top: var(--space-sm); }
        .mt-md { margin-top: var(--space-md); }
        .mt-lg { margin-top: var(--space-lg); }
        .mt-xl { margin-top: var(--space-xl); }

        .mb-xs { margin-bottom: var(--space-xs); }
        .mb-sm { margin-bottom: var(--space-sm); }
        .mb-md { margin-bottom: var(--space-md); }
        .mb-lg { margin-bottom: var(--space-lg); }
        .mb-xl { margin-bottom: var(--space-xl); }

        .p-xs { padding: var(--space-xs); }
        .p-sm { padding: var(--space-sm); }
        .p-md { padding: var(--space-md); }
        .p-lg { padding: var(--space-lg); }
        .p-xl { padding: var(--space-xl); }

        .hidden { display: none !important; }
        .block { display: block; }
        .inline-block { display: inline-block; }

        .relative { position: relative; }
        .absolute { position: absolute; }
        .fixed { position: fixed; }

        .overflow-hidden { overflow: hidden; }
        .overflow-y-auto { overflow-y: auto; }

        .pointer-events-none { pointer-events: none; }
        .pointer-events-auto { pointer-events: auto; }

        .transition-all { transition: all var(--transition-base); }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen">
        <div class="loading-logo">T</div>
        <div class="loading-progress">
            <div class="loading-progress-bar" id="loadingProgress"></div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <button class="nav-back hidden" id="navBack">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="nav-title" id="navTitle">Too Turned Trivia™</div>
        <div class="nav-actions">
            <button class="nav-btn menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Hamburger Menu -->
    <div class="menu-overlay" id="menuOverlay">
        <div class="menu-content">
            <div class="menu-header">
                <h2 class="menu-title">Menu</h2>
                <p class="text-caption">Navigate through the game</p>
            </div>
            <div class="menu-items">
                <a href="#home" class="menu-item active" data-screen="home">
                    <span class="menu-icon"><i class="fas fa-home"></i></span>
                    <span>Home</span>
                </a>
                <a href="#play" class="menu-item" data-screen="play">
                    <span class="menu-icon"><i class="fas fa-play"></i></span>
                    <span>Quick Play</span>
                </a>
                <a href="#modes" class="menu-item" data-screen="modes">
                    <span class="menu-icon"><i class="fas fa-gamepad"></i></span>
                    <span>Game Modes</span>
                </a>
                <a href="#library" class="menu-item" data-screen="library">
                    <span class="menu-icon"><i class="fas fa-book"></i></span>
                    <span>Card Library</span>
                </a>
                <a href="#stats" class="menu-item" data-screen="stats">
                    <span class="menu-icon"><i class="fas fa-chart-line"></i></span>
                    <span>Stats & History</span>
                </a>
                <a href="#rules" class="menu-item" data-screen="rules">
                    <span class="menu-icon"><i class="fas fa-info-circle"></i></span>
                    <span>Game Rules</span>
                </a>
                <a href="#settings" class="menu-item" data-screen="settings">
                    <span class="menu-icon"><i class="fas fa-cog"></i></span>
                    <span>Settings</span>
                </a>
                <a href="#about" class="menu-item" data-screen="about">
                    <span class="menu-icon"><i class="fas fa-question-circle"></i></span>
                    <span>About</span>
                </a>
            </div>
            <button class="btn btn-icon menu-close" id="menuClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Screens -->
    <main>
        <!-- Home Screen -->
        <div class="screen active" id="homeScreen">
            <div class="page-content">
                <section class="hero-section">
                    <h1 class="hero-title">Too Turned Trivia™</h1>
                    <p class="hero-subtitle">Modern mobile trivia with multiple gameplay modes. Challenge your knowledge across various categories!</p>
                    <button class="btn btn-primary btn-lg" data-screen="play">
                        Start Playing
                    </button>
                </section>

                <section class="quick-actions">
                    <a href="#play" class="action-card" data-screen="play">
                        <div class="action-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="action-title">Quick Play</h3>
                        <p class="action-description">Jump straight into a game with default settings</p>
                    </a>
                    
                    <a href="#modes" class="action-card" data-screen="modes">
                        <div class="action-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h3 class="action-title">Game Modes</h3>
                        <p class="action-description">Choose from 6 different gameplay styles</p>
                    </a>
                    
                    <a href="#library" class="action-card" data-screen="library">
                        <div class="action-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3 class="action-title">Card Library</h3>
                        <p class="action-description">Browse all available question decks</p>
                    </a>
                    
                    <a href="#stats" class="action-card" data-screen="stats">
                        <div class="action-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="action-title">Stats & History</h3>
                        <p class="action-description">Track your progress and past games</p>
                    </a>
                </section>
            </div>
        </div>

        <!-- Game Setup Screen -->
        <div class="screen" id="playScreen">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Game Setup</h2>
                    <p class="page-subtitle">Configure your game in 3 simple steps</p>
                </div>

                <div class="setup-stepper">
                    <div class="step active" data-step="1">
                        <div class="step-circle">1</div>
                        <div class="step-label">Players</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-circle">2</div>
                        <div class="step-label">Mode</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-circle">3</div>
                        <div class="step-label">Deck</div>
                    </div>
                </div>

                <div class="setup-content">
                    <!-- Step 1: Players -->
                    <div class="setup-section active" data-step="1">
                        <h3 class="text-headline mb-md">Add Players</h3>
                        <p class="text-caption mb-lg">Add at least 2 players to start the game</p>
                        
                        <div class="players-list" id="playersList">
                            <!-- Players will be added here -->
                        </div>
                        
                        <div class="player-input-group">
                            <input 
                                type="text" 
                                id="playerNameInput"
                                class="w-full p-md bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-yellow"
                                placeholder="Enter player name"
                                maxlength="20"
                            />
                            <button id="addPlayerBtn" class="btn btn-primary">
                                Add
                            </button>
                        </div>
                        
                        <div class="text-center mt-lg">
                            <button class="btn btn-secondary" id="nextStepBtn" data-next="2" disabled>
                                Continue to Mode Selection
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Game Mode -->
                    <div class="setup-section" data-step="2">
                        <h3 class="text-headline mb-md">Select Game Mode</h3>
                        <p class="text-caption mb-lg">Choose how you want to play</p>
                        
                        <div class="modes-grid" id="modesSelection">
                            <!-- Mode cards will be inserted here -->
                        </div>
                        
                        <div class="text-center mt-lg">
                            <button class="btn btn-secondary" id="prevStepBtn" data-prev="1">
                                Back to Players
                            </button>
                            <button class="btn btn-primary ml-md" id="nextStepBtn2" data-next="3" disabled>
                                Continue to Deck Selection
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Deck -->
                    <div class="setup-section" data-step="3">
                        <h3 class="text-headline mb-md">Select Deck</h3>
                        <p class="text-caption mb-lg">Choose your question category</p>
                        
                        <div class="decks-grid" id="decksSelection">
                            <!-- Deck cards will be inserted here -->
                        </div>
                        
                        <div class="text-center mt-lg">
                            <button class="btn btn-secondary" id="prevStepBtn2" data-prev="2">
                                Back to Mode Selection
                            </button>
                            <button class="btn btn-primary btn-lg ml-md" id="startGameBtn" disabled>
                                Start Game
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Modes Screen -->
        <div class="screen" id="modesScreen">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Game Modes</h2>
                    <p class="page-subtitle">Choose from 6 different gameplay styles</p>
                </div>

                <div class="modes-grid">
                    <!-- Mode 1: Classic -->
                    <div class="mode-card" data-mode="classic">
                        <div class="mode-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <h3 class="mode-name">Classic</h3>
                        <p class="mode-description">Traditional question/answer format with progressive difficulty levels. Perfect for beginners!</p>
                        <div class="mode-features">
                            <span class="mode-feature">🎯 Progressive</span>
                            <span class="mode-feature">📊 Categories</span>
                            <span class="mode-feature">⏱️ Timed</span>
                        </div>
                    </div>

                    <!-- Mode 2: Countdown -->
                    <div class="mode-card" data-mode="countdown">
                        <div class="mode-icon">
                            <i class="fas fa-stopwatch"></i>
                        </div>
                        <h3 class="mode-name">Countdown</h3>
                        <p class="mode-description">Earn bonus points for quick answers! Time limits per question challenge your speed.</p>
                        <div class="mode-features">
                            <span class="mode-feature">⚡ Speed Bonus</span>
                            <span class="mode-feature">⏰ Time Pressure</span>
                            <span class="mode-feature">🏆 Competitive</span>
                        </div>
                    </div>

                    <!-- Mode 3: Ladder -->
                    <div class="mode-card" data-mode="ladder">
                        <div class="mode-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="mode-name">Ladder</h3>
                        <p class="mode-description">Advance through levels by getting a certain number of answers correct. Climb to the top!</p>
                        <div class="mode-features">
                            <span class="mode-feature">📈 Progress</span>
                            <span class="mode-feature">🎮 Levels</span>
                            <span class="mode-feature">🏅 Achievements</span>
                        </div>
                    </div>

                    <!-- Mode 4: Battle -->
                    <div class="mode-card" data-mode="battle">
                        <div class="mode-icon">
                            <i class="fas fa-skull-crossbones"></i>
                        </div>
                        <h3 class="mode-name">Battle</h3>
                        <p class="mode-description">Elimination-style gameplay! Wrong answers knock players out. Last one standing wins!</p>
                        <div class="mode-features">
                            <span class="mode-feature">💀 Elimination</span>
                            <span class="mode-feature">⚔️ Competitive</span>
                            <span class="mode-feature">🏆 Survivor</span>
                        </div>
                    </div>

                    <!-- Mode 5: Team -->
                    <div class="mode-card" data-mode="team">
                        <div class="mode-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="mode-name">Team Battle</h3>
                        <p class="mode-description">Form teams and compete together! Collaborative answering with different roles.</p>
                        <div class="mode-features">
                            <span class="mode-feature">🤝 Teamwork</span>
                            <span class="mode-feature">🎯 Strategy</span>
                            <span class="mode-feature">🏅 Collaboration</span>
                        </div>
                    </div>

                    <!-- Mode 6: Solo -->
                    <div class="mode-card" data-mode="solo">
                        <div class="mode-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3 class="mode-name">Solo Challenge</h3>
                        <p class="mode-description">Individual play with deadlines. Perfect for homework, self-study, or personal challenge!</p>
                        <div class="mode-features">
                            <span class="mode-feature">🎓 Learning</span>
                            <span class="mode-feature">📚 Study</span>
                            <span class="mode-feature">🎯 Personal Best</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deck Library Screen -->
        <div class="screen" id="libraryScreen">
            <div class="page-content">
                <div class="page-header">
                    <h2 class="page-title">Card Library</h2>
                    <p class="page-subtitle">Browse all available question decks</p>
                </div>

                <div class="decks-grid">
                    <!-- Deck 1 -->
                    <div class="deck-card" data-deck="general">
                        <div class="deck-image">
                            <i class="fas fa-globe deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">General Knowledge</h3>
                            <p class="deck-description">A wide range of topics from science to history, geography to pop culture.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 90 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.5
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Deck 2 -->
                    <div class="deck-card" data-deck="movies">
                        <div class="deck-image">
                            <i class="fas fa-film deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">Movies & TV</h3>
                            <p class="deck-description">From classic films to binge-worthy series, test your entertainment knowledge.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 75 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.8
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Deck 3 -->
                    <div class="deck-card" data-deck="music">
                        <div class="deck-image">
                            <i class="fas fa-music deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">Music</h3>
                            <p class="deck-description">Artists, albums, music history, and everything in between.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 80 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.3
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Deck 4 -->
                    <div class="deck-card" data-deck="science">
                        <div class="deck-image">
                            <i class="fas fa-flask deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">Science & Tech</h3>
                            <p class="deck-description">Biology, chemistry, physics, technology, and scientific discoveries.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 65 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.7
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Deck 5 -->
                    <div class="deck-card" data-deck="sports">
                        <div class="deck-image">
                            <i class="fas fa-football-ball deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">Sports</h3>
                            <p class="deck-description">Athletes, teams, iconic moments, and sports history from around the world.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 70 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.6
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Deck 6 -->
                    <div class="deck-card" data-deck="geography">
                        <div class="deck-image">
                            <i class="fas fa-map deck-icon"></i>
                        </div>
                        <div class="deck-content">
                            <h3 class="deck-title">Geography</h3>
                            <p class="deck-description">Countries, capitals, landmarks, flags, and world geography challenges.</p>
                            <div class="deck-stats">
                                <span class="deck-count">
                                    <i class="fas fa-cards"></i> 85 cards
                                </span>
                                <span class="deck-rating">
                                    <i class="fas fa-star"></i> 4.4
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div class="screen" id="gameScreen">
            <div class="page-content">
                <!-- Game Header -->
                <div class="game-header">
                    <div class="game-info">
                        <div class="game-mode" id="currentGameMode">
                            <i class="fas fa-gamepad"></i> Classic Mode
                        </div>
                        <div class="text-caption" id="currentDeckInfo">
                            General Knowledge • Card 1/5
                        </div>
                    </div>
                    
                    <div class="game-stats">
                        <div class="timer-display">
                            <div class="timer-circle">
                                <svg class="timer-svg" viewBox="0 0 100 100">
                                    <circle class="timer-circle-bg" cx="50" cy="50" r="45"></circle>
                                    <circle class="timer-circle-fill" cx="50" cy="50" r="45" 
                                            stroke-dasharray="283" stroke-dashoffset="283"
                                            id="gameTimerCircle"></circle>
                                </svg>
                                <div class="timer-text" id="gameTimerText">30</div>
                            </div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-value" id="playerScore">0</div>
                            <div class="stat-label">Score</div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-value" id="playerLives">3</div>
                            <div class="stat-label">Lives</div>
                        </div>
                    </div>
                </div>

                <!-- Question Card -->
                <div class="question-card">
                    <div class="question-header">
                        <div class="question-progress">
                            <span>Question <span id="currentQuestion">1</span>/10</span>
                            <span id="questionTimer">30s</span>
                        </div>
                        <div class="question-category" id="questionCategory">
                            <i class="fas fa-tag"></i> General Knowledge
                        </div>
                    </div>
                    
                    <div class="question-text" id="questionText">
                        What is the capital city of France?
                    </div>
                    
                    <div class="answers-grid" id="answersContainer">
                        <!-- Answers will be populated here -->
                    </div>
                </div>

                <!-- Game Controls -->
                <div class="game-controls">
                    <button class="btn btn-secondary" id="pauseGameBtn">
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button class="btn btn-outline" id="hintBtn" disabled>
                        <i class="fas fa-lightbulb"></i> Hint
                    </button>
                    <button class="btn btn-primary" id="nextQuestionBtn" disabled>
                        Next <i class="fas fa-arrow-right ml-md"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Game Complete Modal -->
    <div class="modal-overlay" id="gameCompleteModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="text-title">Game Complete! 🏆</h2>
                <p class="text-caption mt-sm">Great game! Here are your results</p>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <div class="stat-value" id="finalScore">0</div>
                    <p class="text-caption mt-xs">Final Score</p>
                    
                    <div class="stats-overview mt-lg">
                        <div class="stat-card">
                            <div class="stat-value" id="correctAnswers">0</div>
                            <div class="stat-label">Correct</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="timePlayed">0s</div>
                            <div class="stat-label">Time</div>
                        </div>
                    </div>
                    
                    <div class="text-left mt-xl">
                        <h3 class="text-subhead mb-md">Performance Summary</h3>
                        <p class="text-body text-gray-400" id="performanceSummary">
                            You answered 0 out of 0 questions correctly.
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="backToMenuBtn">
                    Main Menu
                </button>
                <button class="btn btn-primary" id="playAgainBtn">
                    Play Again
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== GAME STATE =====
        const gameState = {
            // Navigation
            currentScreen: 'home',
            screenHistory: ['home'],
            
            // Players
            players: [],
            currentPlayerIndex: 0,
            
            // Game Setup
            selectedMode: null,
            selectedDeck: null,
            gameModes: [
                {
                    id: 'classic',
                    name: 'Classic',
                    icon: 'crown',
                    description: 'Traditional question/answer format',
                    color: '#F5A623'
                },
                {
                    id: 'countdown',
                    name: 'Countdown',
                    icon: 'stopwatch',
                    description: 'Speed bonus for quick answers',
                    color: '#FF6B6B'
                },
                {
                    id: 'ladder',
                    name: 'Ladder',
                    icon: 'chart-line',
                    description: 'Advance through levels',
                    color: '#4ECDC4'
                },
                {
                    id: 'battle',
                    name: 'Battle',
                    icon: 'skull-crossbones',
                    description: 'Elimination gameplay',
                    color: '#FFD166'
                },
                {
                    id: 'team',
                    name: 'Team Battle',
                    icon: 'users',
                    description: 'Team-based competition',
                    color: '#06D6A0'
                },
                {
                    id: 'solo',
                    name: 'Solo Challenge',
                    icon: 'user-graduate',
                    description: 'Individual play with deadlines',
                    color: '#118AB2'
                }
            ],
            
            decks: [
                {
                    id: 'general',
                    name: 'General Knowledge',
                    icon: 'globe',
                    color: '#F5A623',
                    count: 90,
                    rating: 4.5
                },
                {
                    id: 'movies',
                    name: 'Movies & TV',
                    icon: 'film',
                    color: '#EF476F',
                    count: 75,
                    rating: 4.8
                },
                {
                    id: 'music',
                    name: 'Music',
                    icon: 'music',
                    color: '#06D6A0',
                    count: 80,
                    rating: 4.3
                },
                {
                    id: 'science',
                    name: 'Science & Tech',
                    icon: 'flask',
                    color: '#118AB2',
                    count: 65,
                    rating: 4.7
                },
                {
                    id: 'sports',
                    name: 'Sports',
                    icon: 'football-ball',
                    color: '#FFD166',
                    count: 70,
                    rating: 4.6
                },
                {
                    id: 'geography',
                    name: 'Geography',
                    icon: 'map',
                    color: '#073B4C',
                    count: 85,
                    rating: 4.4
                }
            ],
            
            // Current Game
            isGameActive: false,
            currentQuestionIndex: 0,
            totalQuestions: 10,
            score: 0,
            lives: 3,
            timer: 30,
            timerInterval: null,
            
            // Questions Database
            questions: {
                general: [
                    {
                        question: "What is the capital city of France?",
                        answers: [
                            { text: "Paris", correct: true },
                            { text: "London", correct: false },
                            { text: "Berlin", correct: false },
                            { text: "Madrid", correct: false }
                        ],
                        category: "General Knowledge",
                        difficulty: "easy"
                    },
                    {
                        question: "How many continents are there on Earth?",
                        answers: [
                            { text: "5", correct: false },
                            { text: "6", correct: false },
                            { text: "7", correct: true },
                            { text: "8", correct: false }
                        ],
                        category: "Geography",
                        difficulty: "easy"
                    },
                    {
                        question: "What is the chemical symbol for gold?",
                        answers: [
                            { text: "Go", correct: false },
                            { text: "Gd", correct: false },
                            { text: "Au", correct: true },
                            { text: "Ag", correct: false }
                        ],
                        category: "Science",
                        difficulty: "medium"
                    },
                    {
                        question: "Who wrote the play 'Romeo and Juliet'?",
                        answers: [
                            { text: "Charles Dickens", correct: false },
                            { text: "William Shakespeare", correct: true },
                            { text: "Jane Austen", correct: false },
                            { text: "Mark Twain", correct: false }
                        ],
                        category: "Literature",
                        difficulty: "easy"
                    }
                ],
                movies: [
                    {
                        question: "Which actor played Iron Man in the Marvel Cinematic Universe?",
                        answers: [
                            { text: "Chris Evans", correct: false },
                            { text: "Robert Downey Jr.", correct: true },
                            { text: "Chris Hemsworth", correct: false },
                            { text: "Mark Ruffalo", correct: false }
                        ],
                        category: "Movies",
                        difficulty: "easy"
                    },
                    {
                        question: "What year was the first Star Wars film released?",
                        answers: [
                            { text: "1975", correct: false },
                            { text: "1977", correct: true },
                            { text: "1979", correct: false },
                            { text: "1981", correct: false }
                        ],
                        category: "Movies",
                        difficulty: "medium"
                    }
                ],
                music: [
                    {
                        question: "Who is known as the 'King of Pop'?",
                        answers: [
                            { text: "Elvis Presley", correct: false },
                            { text: "Michael Jackson", correct: true },
                            { text: "Prince", correct: false },
                            { text: "Madonna", correct: false }
                        ],
                        category: "Music",
                        difficulty: "easy"
                    },
                    {
                        question: "Which British band released the album 'Abbey Road'?",
                        answers: [
                            { text: "The Rolling Stones", correct: false },
                            { text: "The Beatles", correct: true },
                            { text: "Led Zeppelin", correct: false },
                            { text: "Queen", correct: false }
                        ],
                        category: "Music",
                        difficulty: "medium"
                    }
                ]
            }
        };

        // ===== DOM ELEMENTS =====
        const elements = {
            // Loading
            loadingScreen: document.getElementById('loadingScreen'),
            loadingProgress: document.getElementById('loadingProgress'),
            
            // Navigation
            navBar: document.querySelector('.nav-bar'),
            navBack: document.getElementById('navBack'),
            navTitle: document.getElementById('navTitle'),
            menuToggle: document.getElementById('menuToggle'),
            menuOverlay: document.getElementById('menuOverlay'),
            menuClose: document.getElementById('menuClose'),
            
            // Screens
            screens: {
                home: document.getElementById('homeScreen'),
                play: document.getElementById('playScreen'),
                modes: document.getElementById('modesScreen'),
                library: document.getElementById('libraryScreen'),
                game: document.getElementById('gameScreen')
            },
            
            // Setup Screen
            playersList: document.getElementById('playersList'),
            playerNameInput: document.getElementById('playerNameInput'),
            addPlayerBtn: document.getElementById('addPlayerBtn'),
            nextStepBtn: document.getElementById('nextStepBtn'),
            nextStepBtn2: document.getElementById('nextStepBtn2'),
            prevStepBtn: document.getElementById('prevStepBtn'),
            prevStepBtn2: document.getElementById('prevStepBtn2'),
            startGameBtn: document.getElementById('startGameBtn'),
            modesSelection: document.getElementById('modesSelection'),
            decksSelection: document.getElementById('decksSelection'),
            
            // Game Screen
            currentGameMode: document.getElementById('currentGameMode'),
            currentDeckInfo: document.getElementById('currentDeckInfo'),
            gameTimerCircle: document.getElementById('gameTimerCircle'),
            gameTimerText: document.getElementById('gameTimerText'),
            playerScore: document.getElementById('playerScore'),
            playerLives: document.getElementById('playerLives'),
            currentQuestion: document.getElementById('currentQuestion'),
            questionTimer: document.getElementById('questionTimer'),
            questionCategory: document.getElementById('questionCategory'),
            questionText: document.getElementById('questionText'),
            answersContainer: document.getElementById('answersContainer'),
            pauseGameBtn: document.getElementById('pauseGameBtn'),
            hintBtn: document.getElementById('hintBtn'),
            nextQuestionBtn: document.getElementById('nextQuestionBtn'),
            
            // Modal
            gameCompleteModal: document.getElementById('gameCompleteModal'),
            finalScore: document.getElementById('finalScore'),
            correctAnswers: document.getElementById('correctAnswers'),
            timePlayed: document.getElementById('timePlayed'),
            performanceSummary: document.getElementById('performanceSummary'),
            backToMenuBtn: document.getElementById('backToMenuBtn'),
            playAgainBtn: document.getElementById('playAgainBtn')
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', () => {
            initializeLoading();
            setupEventListeners();
            populateGameModes();
            populateDecks();
            addSamplePlayers();
        });

        // ===== LOADING SCREEN =====
        function initializeLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        elements.loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            elements.loadingScreen.style.display = 'none';
                            updateNavigation('home', 'Too Turned Trivia™');
                        }, 500);
                    }, 300);
                }
                elements.loadingProgress.style.width = `${progress}%`;
            }, 100);
        }

        // ===== NAVIGATION SYSTEM =====
        function updateNavigation(screenId, title = '') {
            // Update screen history
            if (screenId !== gameState.currentScreen) {
                gameState.screenHistory.push(screenId);
                gameState.currentScreen = screenId;
            }
            
            // Update back button
            if (gameState.screenHistory.length > 1) {
                elements.navBack.classList.remove('hidden');
            } else {
                elements.navBack.classList.add('hidden');
            }
            
            // Update title
            elements.navTitle.textContent = title || getScreenTitle(screenId);
            
            // Hide all screens
            Object.values(elements.screens).forEach(screen => {
                if (screen) screen.classList.remove('active');
            });
            
            // Show current screen
            if (elements.screens[screenId]) {
                elements.screens[screenId].classList.add('active');
            }
            
            // Update menu active state
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-screen') === screenId) {
                    item.classList.add('active');
                }
            });
            
            // Close menu if open
            closeMenu();
        }

        function goBack() {
            if (gameState.screenHistory.length > 1) {
                gameState.screenHistory.pop(); // Remove current
                const previousScreen = gameState.screenHistory.pop(); // Get previous
                if (previousScreen) {
                    updateNavigation(previousScreen);
                }
            }
        }

        function getScreenTitle(screenId) {
            const titles = {
                home: 'Too Turned Trivia™',
                play: 'Game Setup',
                modes: 'Game Modes',
                library: 'Card Library',
                game: 'Playing Now',
                stats: 'Stats & History',
                rules: 'Game Rules',
                settings: 'Settings',
                about: 'About'
            };
            return titles[screenId] || 'Too Turned Trivia™';
        }

        // ===== MENU SYSTEM =====
        function openMenu() {
            elements.menuOverlay.classList.add('active');
        }

        function closeMenu() {
            elements.menuOverlay.classList.remove('active');
        }

        // ===== PLAYER MANAGEMENT =====
        function addPlayer(name) {
            if (!name.trim()) return;
            
            const playerName = name.trim().substring(0, 20);
            
            if (!gameState.players.includes(playerName)) {
                gameState.players.push(playerName);
                updatePlayersList();
                updateNextStepButton();
            }
            
            elements.playerNameInput.value = '';
            elements.playerNameInput.focus();
        }

        function removePlayer(name) {
            gameState.players = gameState.players.filter(p => p !== name);
            updatePlayersList();
            updateNextStepButton();
        }

        function updatePlayersList() {
            const list = elements.playersList;
            
            if (gameState.players.length === 0) {
                list.innerHTML = `
                    <div class="text-center p-lg text-gray-500">
                        <i class="fas fa-users text-2xl mb-sm"></i>
                        <p>No players added yet</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = gameState.players.map((player, index) => `
                <div class="player-item">
                    <div class="player-info">
                        <div class="player-avatar">${index + 1}</div>
                        <div class="player-name">${player}</div>
                    </div>
                    <button class="player-remove" onclick="removePlayer('${player}')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `).join('');
        }

        function addSamplePlayers() {
            addPlayer('Player 1');
            addPlayer('Player 2');
        }

        // ===== GAME SETUP =====
        function populateGameModes() {
            const container = elements.modesSelection;
            if (!container) return;
            
            container.innerHTML = gameState.gameModes.map(mode => `
                <div class="mode-card" data-mode="${mode.id}">
                    <div class="mode-icon">
                        <i class="fas fa-${mode.icon}"></i>
                    </div>
                    <h3 class="mode-name">${mode.name}</h3>
                    <p class="mode-description">${mode.description}</p>
                    <div class="mode-features">
                        <span class="mode-feature">🎮 ${mode.name}</span>
                        <span class="mode-feature">📊 10 Questions</span>
                        <span class="mode-feature">⏱️ Timed</span>
                    </div>
                </div>
            `).join('');
        }

        function populateDecks() {
            const container = elements.decksSelection;
            if (!container) return;
            
            container.innerHTML = gameState.decks.map(deck => `
                <div class="deck-card" data-deck="${deck.id}">
                    <div class="deck-image" style="background: linear-gradient(135deg, ${deck.color}20, #000000);">
                        <i class="fas fa-${deck.icon} deck-icon" style="color: ${deck.color};"></i>
                    </div>
                    <div class="deck-content">
                        <h3 class="deck-title">${deck.name}</h3>
                        <p class="deck-description">Test your knowledge in this category with ${deck.count} challenging questions.</p>
                        <div class="deck-stats">
                            <span class="deck-count">
                                <i class="fas fa-cards"></i> ${deck.count} cards
                            </span>
                            <span class="deck-rating">
                                <i class="fas fa-star"></i> ${deck.rating}
                            </span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateNextStepButton() {
            const nextBtn = elements.nextStepBtn;
            if (nextBtn) {
                nextBtn.disabled = gameState.players.length < 2;
            }
        }

        function setupStepNavigation() {
            const steps = document.querySelectorAll('.step');
            const sections = document.querySelectorAll('.setup-section');
            
            // Show step 1 by default
            steps.forEach(step => step.classList.remove('active', 'completed'));
            sections.forEach(section => section.classList.remove('active'));
            
            steps[0].classList.add('active');
            sections[0].classList.add('active');
            
            // Next step buttons
            document.querySelectorAll('[data-next]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const nextStep = parseInt(btn.dataset.next);
                    navigateToStep(nextStep);
                });
            });
            
            // Previous step buttons
            document.querySelectorAll('[data-prev]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const prevStep = parseInt(btn.dataset.prev);
                    navigateToStep(prevStep);
                });
            });
        }

        function navigateToStep(stepNumber) {
            const steps = document.querySelectorAll('.step');
            const sections = document.querySelectorAll('.setup-section');
            
            // Update steps
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < stepNumber) {
                    step.classList.add('completed');
                } else if (index + 1 === stepNumber) {
                    step.classList.add('active');
                }
            });
            
            // Update sections
            sections.forEach((section, index) => {
                section.classList.remove('active');
                if (index + 1 === stepNumber) {
                    section.classList.add('active');
                }
            });
            
            // Update mode and deck selection
            if (stepNumber === 2) {
                updateModeSelection();
            } else if (stepNumber === 3) {
                updateDeckSelection();
            }
        }

        function updateModeSelection() {
            document.querySelectorAll('.mode-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.mode-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    gameState.selectedMode = this.dataset.mode;
                    
                    // Enable next step button
                    const nextBtn = elements.nextStepBtn2;
                    if (nextBtn) {
                        nextBtn.disabled = false;
                    }
                });
            });
        }

        function updateDeckSelection() {
            document.querySelectorAll('.deck-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.deck-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    gameState.selectedDeck = this.dataset.deck;
                    
                    // Enable start game button
                    const startBtn = elements.startGameBtn;
                    if (startBtn) {
                        startBtn.disabled = false;
                    }
                });
            });
        }

        // ===== GAME FUNCTIONS =====
        function startGame() {
            if (!gameState.selectedMode || !gameState.selectedDeck || gameState.players.length < 2) {
                alert('Please complete all setup steps!');
                return;
            }
            
            // Reset game state
            gameState.isGameActive = true;
            gameState.currentQuestionIndex = 0;
            gameState.score = 0;
            gameState.lives = 3;
            gameState.timer = 30;
            
            // Update UI
            const selectedMode = gameState.gameModes.find(m => m.id === gameState.selectedMode);
            const selectedDeck = gameState.decks.find(d => d.id === gameState.selectedDeck);
            
            elements.currentGameMode.innerHTML = `<i class="fas fa-${selectedMode.icon}"></i> ${selectedMode.name}`;
            elements.currentDeckInfo.textContent = `${selectedDeck.name} • Question 1/${gameState.totalQuestions}`;
            elements.playerScore.textContent = '0';
            elements.playerLives.textContent = '3';
            
            // Navigate to game screen
            updateNavigation('game', 'Playing Now');
            
            // Load first question
            loadQuestion();
        }

        function loadQuestion() {
            const deckQuestions = gameState.questions[gameState.selectedDeck];
            if (!deckQuestions || deckQuestions.length === 0) {
                endGame();
                return;
            }
            
            const question = deckQuestions[gameState.currentQuestionIndex % deckQuestions.length];
            
            // Update UI
            elements.currentQuestion.textContent = gameState.currentQuestionIndex + 1;
            elements.questionCategory.innerHTML = `<i class="fas fa-tag"></i> ${question.category}`;
            elements.questionText.textContent = question.question;
            
            // Clear and populate answers
            elements.answersContainer.innerHTML = '';
            const letters = ['A', 'B', 'C', 'D'];
            
            question.answers.forEach((answer, index) => {
                const answerElement = document.createElement('div');
                answerElement.className = 'answer-option';
                answerElement.innerHTML = `
                    <div class="answer-letter">${letters[index]}</div>
                    <div class="answer-text">${answer.text}</div>
                `;
                answerElement.onclick = () => selectAnswer(answer.correct, answerElement);
                elements.answersContainer.appendChild(answerElement);
            });
            
            // Reset controls
            elements.nextQuestionBtn.disabled = true;
            elements.hintBtn.disabled = false;
            
            // Start timer
            startQuestionTimer();
        }

        function selectAnswer(isCorrect, element) {
            if (!gameState.isGameActive) return;
            
            // Disable all answers
            document.querySelectorAll('.answer-option').forEach(opt => {
                opt.classList.add('disabled');
                opt.onclick = null;
            });
            
            // Mark correct/incorrect
            if (isCorrect) {
                element.classList.add('selected');
                element.classList.add('animate-correct');
                gameState.score += 100;
                elements.playerScore.textContent = gameState.score;
            } else {
                element.classList.add('incorrect');
                element.classList.add('animate-incorrect');
                gameState.lives--;
                elements.playerLives.textContent = gameState.lives;
                
                // Mark correct answer
                document.querySelectorAll('.answer-option').forEach(opt => {
                    if (opt.querySelector('.answer-text').textContent === 
                        getCorrectAnswer()) {
                        opt.classList.add('selected');
                    }
                });
            }
            
            // Stop timer
            clearInterval(gameState.timerInterval);
            
            // Enable next button
            elements.nextQuestionBtn.disabled = false;
            
            // Check if game over
            if (gameState.lives <= 0) {
                setTimeout(endGame, 1500);
            }
        }

        function getCorrectAnswer() {
            const deckQuestions = gameState.questions[gameState.selectedDeck];
            const question = deckQuestions[gameState.currentQuestionIndex % deckQuestions.length];
            const correctAnswer = question.answers.find(a => a.correct);
            return correctAnswer ? correctAnswer.text : '';
        }

        function startQuestionTimer() {
            clearInterval(gameState.timerInterval);
            
            let timeLeft = gameState.timer;
            const circumference = 283;
            
            elements.gameTimerText.textContent = timeLeft;
            elements.questionTimer.textContent = `${timeLeft}s`;
            
            gameState.timerInterval = setInterval(() => {
                timeLeft--;
                
                // Update display
                elements.gameTimerText.textContent = timeLeft;
                elements.questionTimer.textContent = `${timeLeft}s`;
                
                // Update circular progress
                const progress = timeLeft / gameState.timer;
                const offset = circumference * (1 - progress);
                elements.gameTimerCircle.style.strokeDashoffset = offset;
                
                // Change color based on time
                if (timeLeft <= 10) {
                    elements.gameTimerCircle.style.stroke = '#FF6B6B';
                } else if (timeLeft <= 20) {
                    elements.gameTimerCircle.style.stroke = '#FFD166';
                }
                
                // Time's up
                if (timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        function timeUp() {
            // Disable all answers
            document.querySelectorAll('.answer-option').forEach(opt => {
                opt.classList.add('disabled');
                opt.onclick = null;
            });
            
            // Mark correct answer
            document.querySelectorAll('.answer-option').forEach(opt => {
                if (opt.querySelector('.answer-text').textContent === 
                    getCorrectAnswer()) {
                    opt.classList.add('selected');
                }
            });
            
            // Lose a life
            gameState.lives--;
            elements.playerLives.textContent = gameState.lives;
            
            // Enable next button
            elements.nextQuestionBtn.disabled = false;
            
            // Check if game over
            if (gameState.lives <= 0) {
                setTimeout(endGame, 1500);
            }
        }

        function nextQuestion() {
            gameState.currentQuestionIndex++;
            
            if (gameState.currentQuestionIndex >= gameState.totalQuestions) {
                endGame();
                return;
            }
            
            // Update deck info
            const selectedDeck = gameState.decks.find(d => d.id === gameState.selectedDeck);
            elements.currentDeckInfo.textContent = 
                `${selectedDeck.name} • Question ${gameState.currentQuestionIndex + 1}/${gameState.totalQuestions}`;
            
            // Load next question
            loadQuestion();
        }

        function endGame() {
            gameState.isGameActive = false;
            clearInterval(gameState.timerInterval);
            
            // Calculate stats
            const correctCount = Math.floor(gameState.score / 100);
            const timePlayed = (gameState.totalQuestions * 30) - (gameState.timer * (gameState.totalQuestions - gameState.currentQuestionIndex));
            
            // Update modal
            elements.finalScore.textContent = gameState.score;
            elements.correctAnswers.textContent = correctCount;
            elements.timePlayed.textContent = `${timePlayed}s`;
            elements.performanceSummary.textContent = 
                `You answered ${correctCount} out of ${gameState.currentQuestionIndex} questions correctly.`;
            
            // Show modal
            elements.gameCompleteModal.classList.add('active');
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            // Navigation
            elements.navBack.addEventListener('click', goBack);
            elements.menuToggle.addEventListener('click', openMenu);
            elements.menuClose.addEventListener('click', closeMenu);
            elements.menuOverlay.addEventListener('click', (e) => {
                if (e.target === elements.menuOverlay) {
                    closeMenu();
                }
            });
            
            // Menu navigation
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const screen = item.getAttribute('data-screen');
                    updateNavigation(screen);
                });
            });
            
            // Quick actions
            document.querySelectorAll('.action-card, [data-screen]').forEach(item => {
                item.addEventListener('click', function(e) {
                    if (this.hasAttribute('data-screen')) {
                        e.preventDefault();
                        const screen = this.getAttribute('data-screen');
                        updateNavigation(screen);
                    }
                });
            });
            
            // Player management
            elements.addPlayerBtn.addEventListener('click', () => {
                addPlayer(elements.playerNameInput.value);
            });
            
            elements.playerNameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addPlayer(elements.playerNameInput.value);
                }
            });
            
            // Game setup
            elements.startGameBtn.addEventListener('click', startGame);
            
            // Setup step navigation
            setupStepNavigation();
            
            // Game controls
            elements.pauseGameBtn.addEventListener('click', () => {
                if (gameState.isGameActive) {
                    gameState.isGameActive = false;
                    clearInterval(gameState.timerInterval);
                    elements.pauseGameBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
                } else {
                    gameState.isGameActive = true;
                    startQuestionTimer();
                    elements.pauseGameBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
                }
            });
            
            elements.nextQuestionBtn.addEventListener('click', nextQuestion);
            
            // Modal controls
            elements.backToMenuBtn.addEventListener('click', () => {
                elements.gameCompleteModal.classList.remove('active');
                updateNavigation('home');
            });
            
            elements.playAgainBtn.addEventListener('click', () => {
                elements.gameCompleteModal.classList.remove('active');
                startGame();
            });
            
            // Close modal on overlay click
            elements.gameCompleteModal.addEventListener('click', (e) => {
                if (e.target === elements.gameCompleteModal) {
                    elements.gameCompleteModal.classList.remove('active');
                }
            });
            
            // Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (elements.menuOverlay.classList.contains('active')) {
                        closeMenu();
                    } else if (elements.gameCompleteModal.classList.contains('active')) {
                        elements.gameCompleteModal.classList.remove('active');
                    } else if (gameState.currentScreen === 'game') {
                        goBack();
                    }
                }
            });
        }

        // Make functions globally accessible
        window.removePlayer = removePlayer;
        window.addPlayer = addPlayer;
    </script>
</body>
</html>
